sonos_say:
  fields:
    message:
      description: 'The message to speak'
      example: ''
  sequence:
    - service: sonos.snapshot
      entity_id:
        - media_player.symfonisk_wohnzimmer
        - media_player.symfonisk_kueche
    - service: script.sonos_pause
    - wait_template: >
        {%- is_state('media_player.symfonisk_kueche', 'paused') and -%}
        {%- is_state('media_player.symfonisk_wohnzimmer', 'paused') -%}
    - service: media_player.volume_set
      entity_id:
        - media_player.symfonisk_wohnzimmer
        - media_player.symfonisk_kueche
      data:
        volume_level: 0.1
    - service: tts.google_translate_say
      entity_id:
        - media_player.symfonisk_wohnzimmer
        - media_player.symfonisk_kueche
      data_template:
        message: '{{ message }}'
        language: 'de'
    - delay: '00:00:03'
    - wait_template: >
        {%- is_state('media_player.symfonisk_kueche', 'paused') and -%}
        {%- is_state('media_player.symfonisk_wohnzimmer', 'paused') -%}
    - service: sonos.restore
      entity_id:
        - media_player.symfonisk_wohnzimmer
        - media_player.symfonisk_kueche
